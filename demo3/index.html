<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=9,chrome=1">
    <title>Pxxl.js demopage</title>
    <link rel="stylesheet" href="demo.css">
  </head>
  <body>

  <div id="stage" class="stage"></div>

  <div class="footer">
   see the <a href="https://github.com/remcoder/Pxxl.js">Pxxl.js Github repo</a> for tha codez
   <span class="right">&copy; 2012 <a href="http://twitter.com/remcoder">@remcoder</a></span>
  </div>


  <pre class="code"></pre>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <script src="../build/pxxl-0.3.min.js" type="text/javascript"></script>

    <script type="text/javascript" id="code">
function rgba(r,g,b,a) { return "rgba("+ ~~r +","+ ~~g +","+ ~~b +"," + a +")"; }
function randomColor() { return rgba(255*Math.random(),
  255*Math.random(), 255*Math.random(),1) }

function translate3d(x,y,z) { return "translate3d("+x+"px,"+y+"px,"+z+"px)";}
function rotate3d(a,b,c) { return "rotate3d("+a+"deg,"+b+"deg,"+c+"deg)";}
var i = 0;
function Side(cube, which, options) {
  var el = document.createElement("div");
  el.classList.add("side");
  el.classList.add(which);
  el.style.width = el.style.height = options.size + "px";
  el.style.backgroundColor = "hsla(" + Math.abs((i++ % 510) - 255) + ",100%,50%,1)";
  el.style.border = "1px solid black";
  cube.el.appendChild(el);

  var t = 0.5* options.size;

  switch(which)
  {
    case "front":
      el.style.webkitTransform = translate3d(0,0,t);
      break;
    case "right":
      el.style.webkitTransform = translate3d(t,0,0) + "rotateY(90deg)";
      break;
    case "top":
      el.style.webkitTransform = translate3d(0,t,0) + "rotateX(-90deg)";
      break;
    case "back":
      el.style.webkitTransform = translate3d(0,0,-t) + "rotateX(180deg)";
      break;
    case "left":
      el.style.webkitTransform = translate3d(-t,0,0) + "rotateY(-90deg)";
      break;
    case "bottom":
      el.style.webkitTransform = translate3d(0,-t,0) + "rotateX(90deg)";
      break;
  }
}

function Cube(shape, options) {

  var el = this.el = document.createElement("div");
  var x = options.size * options.x;
  var y = options.size * options.y;
  el.style.webkitTransform = "translate3d("+x+"px,"+y+"px,0)";
  el.style.width = el.style.height = options.size + "px";
  el.className = "cube";

  new Side(this, "front", options);
  new Side(this, "left", options);
  new Side(this, "right", options);

  new Side(this, "top", options);
  new Side(this, "bottom", options);
  new Side(this, "back", options);

  shape.el.appendChild(el);
}

pxxl("../fonts/c64.bdf", "3D CSS", function (pixels) {
  var scale = 8;
  var stage = document.querySelector("#stage");
  var shape = { el: document.createElement("div") };
  shape.el.classList.add("shape");
  stage.appendChild(shape.el);


  for (var p=0 ; p<pixels.length ; p++) {
    var pixel = pixels[p];
    var dx = -4*6;
    var dy = -4;
    var cube = new Cube(shape, { size: 16, x: dx+pixel.x, y: dy+pixel.y });
  }
});
    </script>
    <script>
     document.querySelector("pre").innerText = document.getElementById("code").innerText;
    </script>
  </body>
</html>
